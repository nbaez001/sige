package com.sige.gui;

import com.sige.entidad.Auditoria;
import com.sige.servicio.AuditoriaServicio;
import com.sige.util.Injector;
import com.sige.util.SigeUtil;
import com.vaadin.annotations.AutoGenerated;
import com.vaadin.server.ThemeResource;
import com.vaadin.shared.ui.label.ContentMode;
import com.vaadin.ui.AbsoluteLayout;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.Label;
import com.vaadin.ui.UI;
import com.vaadin.ui.Window;

public class DetalleAuditoria extends CustomComponent implements ClickListener {

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	@AutoGenerated
	private AbsoluteLayout mainLayout;

	@AutoGenerated
	private Button btnCerrar;

	@AutoGenerated
	private Label lblMotivoValue;

	@AutoGenerated
	private Label lblMotivo;

	@AutoGenerated
	private Label lblValorNuevoValue;

	@AutoGenerated
	private Label lblValorNuevo;

	@AutoGenerated
	private Label lblValorAntiguoValue;

	@AutoGenerated
	private Label lblFechaModificacionValue;

	@AutoGenerated
	private Label lblPcModificaValue;

	@AutoGenerated
	private Label lblPcModifica;

	@AutoGenerated
	private Label lblAccionValue;

	@AutoGenerated
	private Label lblAccion;

	@AutoGenerated
	private Label lblCampoValue;

	@AutoGenerated
	private Label lblCampo;

	@AutoGenerated
	private Label lblValorClavePrimariaValue;

	@AutoGenerated
	private Label lblValorClavePrimaria;

	@AutoGenerated
	private Label lblValorAntiguo;

	@AutoGenerated
	private Label lblIpModificaValue;

	@AutoGenerated
	private Label lblFechaModificacion;

	@AutoGenerated
	private Label lblIpModifica;

	@AutoGenerated
	private Label lblNombreUsuarioValue;

	@AutoGenerated
	private Label lblNombreUsuario;

	@AutoGenerated
	private Label lblTablaValue;

	@AutoGenerated
	private Label lblTabla;

	@AutoGenerated
	private Label lblClavePrimariaValue;

	@AutoGenerated
	private Label lblClavePrimaria;

	@AutoGenerated
	private Label lblTitulo;

	/**
	 * The constructor should first build the main layout, set the composition
	 * root and then do any custom initialization.
	 * 
	 * The constructor will not be automatically regenerated by the visual
	 * editor.
	 */
	Window windowContiene;
	private CustomComponent quienLlama;
	private AuditoriaServicio auditoriaServicio;

	public DetalleAuditoria(Window windowContiene, CustomComponent quienLlama,
			Integer codAuditoria) {
		this.auditoriaServicio = Injector
				.obtenerServicio(AuditoriaServicio.class);
		buildMainLayout();
		setCompositionRoot(mainLayout);
		this.windowContiene = windowContiene;
		this.quienLlama = quienLlama;
		postBuild();
		llenarDetalle(codAuditoria);
		// TODO add user code here
	}

	private void postBuild() {
		this.btnCerrar.addClickListener((ClickListener) this);
		lblTitulo.setContentMode(ContentMode.HTML);
	}

	private void llenarDetalle(Integer auditoriaId) {
		Auditoria auditoria = auditoriaServicio.obtener(auditoriaId);
		lblAccionValue
				.setValue(auditoria.getTipo().equalsIgnoreCase("U") ? "MODIFICACIÓN"
						: "ELIMINACIÓN");
		lblCampoValue.setValue(auditoria.getNombreCampo());
		lblClavePrimariaValue.setValue(auditoria.getCampoClavePrimaria());
		lblFechaModificacionValue.setValue(SigeUtil
				.obtenerFormatoFecha(auditoria.getFechaActualizacion()));
		lblIpModificaValue.setValue(auditoria.getIp());
		lblMotivoValue.setValue(auditoria.getMotivo());
		lblNombreUsuarioValue.setValue(auditoria.getNombreUsuario());
		lblPcModificaValue.setValue(auditoria.getPc());
		lblTablaValue.setValue(auditoria.getNombreTabla());
		lblValorAntiguoValue.setValue(auditoria.getValorAntiguo());
		lblValorClavePrimariaValue.setValue(auditoria.getValorClavePrimaria());
		lblValorNuevoValue.setValue(auditoria.getValorNuevo());

	}

	@Override
	public void buttonClick(ClickEvent event) {
		if (event.getSource() == this.btnCerrar) {
			UI.getCurrent().removeWindow(windowContiene);
		}

	}

	@AutoGenerated
	private AbsoluteLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new AbsoluteLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("100%");
		mainLayout.setHeight("100%");

		// top-level component properties
		setWidth("100.0%");
		setHeight("100.0%");

		// lblTitulo
		lblTitulo = new Label();
		lblTitulo.setImmediate(false);
		lblTitulo.setWidth("-1px");
		lblTitulo.setHeight("-1px");
		lblTitulo.setValue("<b>DETALLE DE AUDITORIA</b>");
		mainLayout.addComponent(lblTitulo, "top:9.0px;left:240.0px;");

		// lblClavePrimaria
		lblClavePrimaria = new Label();
		lblClavePrimaria.setImmediate(false);
		lblClavePrimaria.setWidth("-1px");
		lblClavePrimaria.setHeight("-1px");
		lblClavePrimaria.setValue("Clave Primaria :");
		mainLayout.addComponent(lblClavePrimaria, "top:40.0px;left:40.0px;");

		// lblClavePrimariaValue
		lblClavePrimariaValue = new Label();
		lblClavePrimariaValue.setImmediate(false);
		lblClavePrimariaValue.setWidth("-1px");
		lblClavePrimariaValue.setHeight("-1px");
		lblClavePrimariaValue.setValue("Label");
		mainLayout.addComponent(lblClavePrimariaValue,
				"top:40.0px;left:130.0px;");

		// lblTabla
		lblTabla = new Label();
		lblTabla.setImmediate(false);
		lblTabla.setWidth("-1px");
		lblTabla.setHeight("-1px");
		lblTabla.setValue("Tabla :");
		mainLayout.addComponent(lblTabla, "top:64.0px;left:40.0px;");

		// lblTablaValue
		lblTablaValue = new Label();
		lblTablaValue.setImmediate(false);
		lblTablaValue.setWidth("-1px");
		lblTablaValue.setHeight("-1px");
		lblTablaValue.setValue("Label");
		mainLayout.addComponent(lblTablaValue, "top:64.0px;left:83.0px;");

		// lblNombreUsuario
		lblNombreUsuario = new Label();
		lblNombreUsuario.setImmediate(false);
		lblNombreUsuario.setWidth("-1px");
		lblNombreUsuario.setHeight("-1px");
		lblNombreUsuario.setValue("Nombre Usuario :");
		mainLayout.addComponent(lblNombreUsuario, "top:85.0px;left:40.0px;");

		// lblNombreUsuarioValue
		lblNombreUsuarioValue = new Label();
		lblNombreUsuarioValue.setImmediate(false);
		lblNombreUsuarioValue.setWidth("-1px");
		lblNombreUsuarioValue.setHeight("-1px");
		lblNombreUsuarioValue.setValue("Label");
		mainLayout.addComponent(lblNombreUsuarioValue,
				"top:85.0px;left:143.0px;");

		// lblIpModifica
		lblIpModifica = new Label();
		lblIpModifica.setImmediate(false);
		lblIpModifica.setWidth("-1px");
		lblIpModifica.setHeight("-1px");
		lblIpModifica.setValue("IP Modifica :");
		mainLayout.addComponent(lblIpModifica, "top:109.0px;left:40.0px;");

		// lblFechaModificacion
		lblFechaModificacion = new Label();
		lblFechaModificacion.setImmediate(false);
		lblFechaModificacion.setWidth("-1px");
		lblFechaModificacion.setHeight("-1px");
		lblFechaModificacion.setValue("Fecha de Modificación :");
		mainLayout.addComponent(lblFechaModificacion,
				"top:130.0px;left:40.0px;");

		// lblIpModificaValue
		lblIpModificaValue = new Label();
		lblIpModificaValue.setImmediate(false);
		lblIpModificaValue.setWidth("-1px");
		lblIpModificaValue.setHeight("-1px");
		lblIpModificaValue.setValue("Label");
		mainLayout
				.addComponent(lblIpModificaValue, "top:109.0px;left:108.0px;");

		// lblValorAntiguo
		lblValorAntiguo = new Label();
		lblValorAntiguo.setImmediate(false);
		lblValorAntiguo.setWidth("-1px");
		lblValorAntiguo.setHeight("-1px");
		lblValorAntiguo.setValue("Valor Antiguo :");
		mainLayout.addComponent(lblValorAntiguo, "top:151.0px;left:40.0px;");

		// lblValorClavePrimaria
		lblValorClavePrimaria = new Label();
		lblValorClavePrimaria.setImmediate(false);
		lblValorClavePrimaria.setWidth("-1px");
		lblValorClavePrimaria.setHeight("-1px");
		lblValorClavePrimaria.setValue("Valor Clave Primaria :");
		mainLayout.addComponent(lblValorClavePrimaria,
				"top:40.0px;left:310.0px;");

		// lblValorClavePrimariaValue
		lblValorClavePrimariaValue = new Label();
		lblValorClavePrimariaValue.setImmediate(false);
		lblValorClavePrimariaValue.setWidth("-1px");
		lblValorClavePrimariaValue.setHeight("-1px");
		lblValorClavePrimariaValue.setValue("Label");
		mainLayout.addComponent(lblValorClavePrimariaValue,
				"top:40.0px;left:431.0px;");

		// lblCampo
		lblCampo = new Label();
		lblCampo.setImmediate(false);
		lblCampo.setWidth("-1px");
		lblCampo.setHeight("-1px");
		lblCampo.setValue("Campo :");
		mainLayout.addComponent(lblCampo, "top:64.0px;left:310.0px;");

		// lblCampoValue
		lblCampoValue = new Label();
		lblCampoValue.setImmediate(false);
		lblCampoValue.setWidth("-1px");
		lblCampoValue.setHeight("-1px");
		lblCampoValue.setValue("Label");
		mainLayout.addComponent(lblCampoValue, "top:64.0px;left:363.0px;");

		// lblAccion
		lblAccion = new Label();
		lblAccion.setImmediate(false);
		lblAccion.setWidth("-1px");
		lblAccion.setHeight("-1px");
		lblAccion.setValue("Accion :");
		mainLayout.addComponent(lblAccion, "top:85.0px;left:310.0px;");

		// lblAccionValue
		lblAccionValue = new Label();
		lblAccionValue.setImmediate(false);
		lblAccionValue.setWidth("-1px");
		lblAccionValue.setHeight("-1px");
		lblAccionValue.setValue("Label");
		mainLayout.addComponent(lblAccionValue, "top:85.0px;left:354.0px;");

		// lblPcModifica
		lblPcModifica = new Label();
		lblPcModifica.setImmediate(false);
		lblPcModifica.setWidth("-1px");
		lblPcModifica.setHeight("-1px");
		lblPcModifica.setValue("PC Modifica :");
		mainLayout.addComponent(lblPcModifica, "top:109.0px;left:311.0px;");

		// lblPcModificaValue
		lblPcModificaValue = new Label();
		lblPcModificaValue.setImmediate(false);
		lblPcModificaValue.setWidth("-1px");
		lblPcModificaValue.setHeight("-1px");
		lblPcModificaValue.setValue("Label");
		mainLayout
				.addComponent(lblPcModificaValue, "top:109.0px;left:385.0px;");

		// lblFechaModificacionValue
		lblFechaModificacionValue = new Label();
		lblFechaModificacionValue.setImmediate(false);
		lblFechaModificacionValue.setWidth("-1px");
		lblFechaModificacionValue.setHeight("-1px");
		lblFechaModificacionValue.setValue("Label");
		mainLayout.addComponent(lblFechaModificacionValue,
				"top:130.0px;left:174.0px;");

		// lblValorAntiguoValue
		lblValorAntiguoValue = new Label();
		lblValorAntiguoValue.setImmediate(false);
		lblValorAntiguoValue.setWidth("560px");
		lblValorAntiguoValue.setHeight("67px");
		lblValorAntiguoValue.setValue("Label");
		mainLayout.addComponent(lblValorAntiguoValue,
				"top:173.0px;left:40.0px;");

		// lblValorNuevo
		lblValorNuevo = new Label();
		lblValorNuevo.setImmediate(false);
		lblValorNuevo.setWidth("-1px");
		lblValorNuevo.setHeight("-1px");
		lblValorNuevo.setValue("Valor Nuevo :");
		mainLayout.addComponent(lblValorNuevo, "top:243.0px;left:40.0px;");

		// lblValorNuevoValue
		lblValorNuevoValue = new Label();
		lblValorNuevoValue.setImmediate(false);
		lblValorNuevoValue.setWidth("560px");
		lblValorNuevoValue.setHeight("68px");
		lblValorNuevoValue.setValue("Label");
		mainLayout.addComponent(lblValorNuevoValue, "top:262.0px;left:40.0px;");

		// lblMotivo
		lblMotivo = new Label();
		lblMotivo.setImmediate(false);
		lblMotivo.setWidth("-1px");
		lblMotivo.setHeight("-1px");
		lblMotivo.setValue("Motivo :");
		mainLayout.addComponent(lblMotivo, "top:337.0px;left:40.0px;");

		// lblMotivoValue
		lblMotivoValue = new Label();
		lblMotivoValue.setImmediate(false);
		lblMotivoValue.setWidth("560px");
		lblMotivoValue.setHeight("82px");
		lblMotivoValue.setValue("Label");
		mainLayout.addComponent(lblMotivoValue, "top:360.0px;left:40.0px;");

		// btnCerrar
		btnCerrar = new Button();
		btnCerrar.setCaption("Cerrar");
		btnCerrar.setIcon(new ThemeResource("images/botones/remove.png"));
		btnCerrar.setImmediate(true);
		btnCerrar.setWidth("100px");
		btnCerrar.setHeight("-1px");
		mainLayout.addComponent(btnCerrar, "top:450.0px;left:289.0px;");

		return mainLayout;
	}

}
