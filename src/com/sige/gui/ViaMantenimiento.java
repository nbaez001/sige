package com.sige.gui;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.vaadin.dialogs.ConfirmDialog;

import com.sige.entidad.TipoVia;
import com.sige.entidad.Via;
import com.sige.gui.ui.NumberField;
import com.sige.servicio.TipoViaServicio;
import com.sige.servicio.UtilService;
import com.sige.servicio.ViaServicio;
import com.sige.util.Boton;
import com.sige.util.Busqueda;
import com.sige.util.Constantes;
import com.sige.util.Injector;
import com.sige.util.Notificacion;
import com.sige.util.Permiso;
import com.sige.util.SigeUtil;
import com.sige.util.TextField;
import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Item;
import com.vaadin.data.Property;
import com.vaadin.data.Property.ValueChangeEvent;
import com.vaadin.data.Property.ValueChangeListener;
import com.vaadin.data.util.IndexedContainer;
import com.vaadin.event.FieldEvents.TextChangeEvent;
import com.vaadin.event.FieldEvents.TextChangeListener;
import com.vaadin.event.ShortcutAction.KeyCode;
import com.vaadin.event.ShortcutListener;
import com.vaadin.server.ThemeResource;
import com.vaadin.shared.ui.combobox.FilteringMode;
import com.vaadin.shared.ui.label.ContentMode;
import com.vaadin.ui.AbsoluteLayout;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.Label;
import com.vaadin.ui.Notification;
import com.vaadin.ui.Table;
import com.vaadin.ui.UI;
import com.vaadin.ui.Window;
import com.vaadin.ui.themes.Reindeer;

public class ViaMantenimiento extends CustomComponent implements ClickListener {

	/*- VaadinEditorProperties={"grid":"RegularGrid,10","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	@AutoGenerated
	private AbsoluteLayout mainLayout;
	@AutoGenerated
	private TextField txtBuscarTipoVia;
	@AutoGenerated
	private Button btnImprimir;
	@AutoGenerated
	private ComboBox cbxTipoVia;
	@AutoGenerated
	private Boton btnFinal;
	@AutoGenerated
	private Boton btnSiguiente;
	@AutoGenerated
	private Label lblTotalPaginas;
	@AutoGenerated
	private Label label_4;
	@AutoGenerated
	private NumberField txtPaginaActual;
	@AutoGenerated
	private Label label_3;
	@AutoGenerated
	private Boton btnAtras;
	@AutoGenerated
	private Boton btnInicio;
	@AutoGenerated
	private Button btnCancelar;
	@AutoGenerated
	private Button btnEliminar;
	@AutoGenerated
	private Button btnGuardar;
	@AutoGenerated
	private Button btnNuevo;
	@AutoGenerated
	private TextField txtNombreVia;
	@AutoGenerated
	private Label lblNombre;
	@AutoGenerated
	private NumberField txtCodigoTipoVia;
	@AutoGenerated
	private Label label_2;
	@AutoGenerated
	private Label label_1;
	@AutoGenerated
	private Boton btnBuscarVia;
	@AutoGenerated
	private TextField txtBuscarVia;
	@AutoGenerated
	private Table tbVias;
	private static final long serialVersionUID = 1L;
	private Window windowContiene;
	private CustomComponent quienLlama;
	public Boolean esNuevo = false;
	private ViaServicio viaService;
	private Via via;
	private TipoVia tipoVia;
	private TipoViaServicio tipoViaService;
	private Log logger = LogFactory.getLog(ViaMantenimiento.class);
	private String tipoViaNombre;
	Long codtipo;
	private Long idVia;
	private Map<Long, TipoVia> tipoViaMap = new HashMap<Long, TipoVia>();
	private Map<Long, Via> viaMap = new HashMap<Long, Via>();
	private UtilService utilService;
	private Map<String, Integer> columnLenghts;
	/**
	 * The constructor should first build the main layout, set the composition
	 * root and then do any custom initialization.
	 * 
	 * The constructor will not be automatically regenerated by the visual
	 * editor.
	 */
	private Permiso permiso;
	private boolean confirmacion = false;
	private String motivo = null;

	public ViaMantenimiento(Window windowContiene, CustomComponent quienLlama,
			Permiso permiso) {
		viaService = Injector.obtenerServicio(ViaServicio.class);
		utilService = Injector.obtenerServicio(UtilService.class);
		tipoViaService = Injector.obtenerServicio(TipoViaServicio.class);
		this.windowContiene = windowContiene;
		this.quienLlama = quienLlama;
		this.permiso = permiso;
		buildMainLayout();
		setCompositionRoot(mainLayout);
		postBuild();
		resetearFormulario();
		getAllVias();
		llenarCombo();

		// TODO add user code here
	}

	public void llenarCombo() {
		List<TipoVia> lsTipoVia = tipoViaService.obtenerTodos();
		for (TipoVia tipoVia : lsTipoVia) {
			cbxTipoVia.addItem(tipoVia.getId());
			cbxTipoVia.setItemCaption(tipoVia.getId(), tipoVia.getNombre());
		}
		if (!lsTipoVia.isEmpty()) {
			cbxTipoVia.setValue(lsTipoVia.get(0).getId());
			codtipo = lsTipoVia.get(0).getId();
		}
	}

	public void postBuild() {
		label_3.setContentMode(ContentMode.HTML);
		label_2.setContentMode(ContentMode.HTML);
		label_1.setContentMode(ContentMode.HTML);

		columnLenghts = utilService.getLengthColumns("vias");
		txtNombreVia.setMaxLength(columnLenghts.get("nombre"));
		this.btnBuscarVia.addClickListener((ClickListener) this);
		this.btnNuevo.addClickListener((ClickListener) this);
		this.btnGuardar.addClickListener((ClickListener) this);
		this.btnEliminar.addClickListener((ClickListener) this);
		this.btnCancelar.addClickListener((ClickListener) this);
		this.btnAtras.addClickListener((ClickListener) this);
		this.btnInicio.addClickListener((ClickListener) this);
		this.btnSiguiente.addClickListener((ClickListener) this);
		this.btnFinal.addClickListener((ClickListener) this);
		this.btnImprimir.addClickListener((ClickListener) this);
		this.btnBuscarVia.setStyleName("buscar");

		this.btnInicio.setStyleName(Reindeer.BUTTON_LINK);
		this.btnAtras.setStyleName(Reindeer.BUTTON_LINK);
		this.btnSiguiente.setStyleName(Reindeer.BUTTON_LINK);
		this.btnFinal.setStyleName(Reindeer.BUTTON_LINK);
		this.txtCodigoTipoVia.setEnabled(false);
		// this.txtNombreTipoVia.setEnabled(false);
		this.txtPaginaActual.setValue("1");

		IndexedContainer contenedor = new IndexedContainer();
		contenedor.addContainerProperty("id", Long.class, null);
		contenedor.addContainerProperty("item", Long.class, null);
		contenedor.addContainerProperty("tipo", String.class, null);
		contenedor.addContainerProperty("nombre", String.class, null);
		tbVias.setImmediate(true);
		tbVias.setSelectable(true);
		tbVias.setContainerDataSource(contenedor);
		tbVias.setVisibleColumns(new Object[] { "item", "tipo", "nombre" });
		tbVias.setColumnHeader("item", "Item");
		tbVias.setColumnHeader("tipo", "Tipo Via");
		tbVias.setColumnHeader("nombre", "Nombre");
		tbVias.setColumnWidth("item", 30);
		tbVias.setColumnWidth("tipo", 90);
		tbVias.setColumnWidth("nombre", 160);

		cbxTipoVia.setImmediate(true);
		cbxTipoVia.setFilteringMode(FilteringMode.CONTAINS);
		cbxTipoVia.addValueChangeListener(new ValueChangeListener() {
			@Override
			public void valueChange(ValueChangeEvent event) {
				// TODO Auto-generated method stub
				getTipoVia((Long) event.getProperty().getValue());

			}
		});
		this.btnCancelar.setId("cancelar");
		this.btnEliminar.setId("eliminar");
		this.btnGuardar.setId("guardar");
		this.btnNuevo.setId("nuevo");
		this.btnBuscarVia.setId("consultar");
		this.btnImprimir.setId("imprimir");
		SigeUtil.validarBotones(permiso, btnNuevo, btnEliminar, btnBuscarVia,
				btnCancelar, btnGuardar, btnImprimir);
		txtBuscarVia.setVisible(permiso.getConsultar());
		txtBuscarTipoVia.setVisible(permiso.getConsultar());
		tbVias.addValueChangeListener(new Property.ValueChangeListener() {

			@Override
			public void valueChange(ValueChangeEvent event) {
				// TODO Auto-generated method stub
				Item item = tbVias.getItem(tbVias.getValue());
				if (item != null) {
					esNuevo = false;
					btnGuardar.setCaption("Actualizar");
					btnEliminar.setEnabled(true);
					btnGuardar.setVisible(permiso.getModificar());
					btnGuardar.setEnabled(true);
					btnCancelar.setVisible(permiso.getModificar());
					btnCancelar.setEnabled(true);
					btnNuevo.setEnabled(true);
					desactivarCampos(permiso.getModificar());
					getVia(Long.parseLong(item.getItemProperty("id").getValue()
							.toString()));
					tbVias.unselect(tbVias.getValue());
				}
			}
		});
		this.txtBuscarVia.setImmediate(true);
		this.txtBuscarVia.setId("buscarVia");
		this.txtBuscarVia.addShortcutListener(new ShortcutListener("",
				KeyCode.ENTER, null) {
			@Override
			public void handleAction(Object sender, Object target) {
				// TODO Auto-generated method stub
				if (target instanceof TextField
						&& ((TextField) target).getId().equals("buscarVia")) {
					txtPaginaActual.setValue("1");
					getAllVias();
				}
			}
		});

		this.txtBuscarTipoVia.setImmediate(true);
		this.txtBuscarTipoVia.addTextChangeListener(new TextChangeListener() {

			@Override
			public void textChange(TextChangeEvent event) {
				// TODO Auto-generated method stub
				txtPaginaActual.setValue("1");
				txtBuscarTipoVia.setValue(event.getText());
				getAllVias();
			}
		});

		this.txtBuscarVia.setImmediate(true);
		this.txtBuscarVia.addTextChangeListener(new TextChangeListener() {

			@Override
			public void textChange(TextChangeEvent event) {
				// TODO Auto-generated method stub
				txtPaginaActual.setValue("1");
				txtBuscarVia.setValue(event.getText());
				getAllVias();
			}
		});
	}

	public void obtenerMotivo(String motivo, Boolean confirmacion,
			Integer tipoOperacion) {
		if (confirmacion) {
			this.motivo = motivo;
			this.confirmacion = true;
			if (tipoOperacion.equals(Constantes.TIPO_OPERACION.MODIFICACION)) {
				btnGuardar.click();
			} else {
				btnEliminar.click();
			}
			this.confirmacion = false;
		}
	}

	public void getTipoVia(Long id) {
		if (id != null) {
			TipoVia tipoVia = tipoViaService.obtener(id);
			txtCodigoTipoVia.setValue(tipoVia.getId().toString());
			this.codtipo = tipoVia.getId();
			logger.info(codtipo + "Obtenido del Combo");
		} else {
			codtipo = null;
		}
	}

	public void getVia(Long idVia) {
		this.idVia = idVia;
		Via viaObtenido = viaService.obtener(idVia);
		this.txtNombreVia.setValue(viaObtenido.getNombre().trim());
		this.txtCodigoTipoVia.setValue(viaObtenido.getTipoVia().getId() + "");
		this.codtipo = viaObtenido.getTipoVia().getId();
		this.viaMap.put(this.idVia, viaObtenido);
		TipoVia tipoViaObtenido = tipoViaService.obtener(viaObtenido
				.getTipoVia().getId());
		tipoViaMap.put(this.idVia, tipoViaObtenido);
		this.cbxTipoVia.setValue(this.codtipo);
	}

	public void getAllVias() {
		IndexedContainer contenedor = (IndexedContainer) tbVias
				.getContainerDataSource();
		contenedor.removeAllItems();
		Via viaBuscar = new Via();
		viaBuscar.setNombre(this.txtBuscarVia.getValue().toString());
		TipoVia tipoViaBuscar = new TipoVia();
		tipoViaBuscar.setNombre(txtBuscarTipoVia.getValue().toString());
		viaBuscar.setTipoVia(tipoViaBuscar);
		Long paginaActual = Long.parseLong(this.txtPaginaActual.getValue()
				.toString());
		Busqueda busqueda = viaService.buscarPorVia(viaBuscar, paginaActual);
		this.txtPaginaActual.setValue(busqueda.getPaginaActual() + "");
		this.lblTotalPaginas.setValue(busqueda.getNumeroPaginas() + "");
		List<Via> lsVia = (List<Via>) busqueda.getRegistos();
		Long numeroItem = (Long.parseLong(this.txtPaginaActual.getValue()
				.toString()) - 1) * Constantes.PAGINACION.VIA + 1;
		for (int i = 0; i < lsVia.size(); i++) {
			Item item = contenedor.addItem(i);
			item.getItemProperty("id").setValue(lsVia.get(i).getId());
			item.getItemProperty("item").setValue(numeroItem++);
			item.getItemProperty("tipo").setValue(
					lsVia.get(i).getTipoVia().getNombre());
			item.getItemProperty("nombre").setValue(lsVia.get(i).getNombre());
		}
	}

	@Override
	public void buttonClick(ClickEvent event) {
		// TODO Auto-generated method stub
		if (event.getSource() == this.btnNuevo) {
			NuevoRegistro();
			this.txtNombreVia.focus();
		}
		if (event.getSource() == this.btnGuardar) {
			if (SigeUtil.validarCamposTexto(txtNombreVia) && codtipo != null) {
				String nombre = this.cbxTipoVia.getItemCaption(codtipo);
				logger.info(nombre);
				if (esNuevo) {
					this.tipoVia.setNombre(nombre);
					this.tipoVia.setId(codtipo);
					this.via.setNombre(this.txtNombreVia.getValue().toString());
					this.via.setTipoVia(this.tipoVia);
					if (!viaService.validarDuplicidad(via)) {
						Notificacion.show(new Notificacion(
								"El nombre de la via ya existe",
								Constantes.MENSAJE.TYPE_ERROR));
						return;
					}
					guardarVia(via);
					Notificacion.show(new Notificacion(
							"Se guardo correctamente la via",
							Constantes.MENSAJE.TYPE_SUCCES));
					respuesta(via.getId());
				} else {
					TipoVia tipoViaActualizar = tipoViaMap.get(this.idVia);
					tipoViaActualizar.setId(this.codtipo);
					tipoViaActualizar.setNombre(this.cbxTipoVia
							.getItemCaption(this.codtipo));
					Via viaActualizar = viaMap.get(this.idVia);
					viaActualizar.setNombre(this.txtNombreVia.getValue()
							.toString());
					viaActualizar.setTipoVia(tipoViaActualizar);
					if (!viaService.validarDuplicidad(viaActualizar)) {
						Notificacion.show(new Notificacion(
								"El nombre de la via ya existe",
								Constantes.MENSAJE.TYPE_ERROR));
						return;
					}
					if (!confirmacion) {
						Window ventana = SigeUtil.generarBuscador(new Window(),
								"INGRESAR MOTIVO", "360", "260");
						ventana.setContent(new PanelMotivoObservacion(ventana,
								this, Constantes.TIPO_OPERACION.MODIFICACION,
								(columnLenghts.get("motivomodifica"))));
						UI.getCurrent().addWindow(ventana);
						return;
					}
					viaActualizar.setMotivoModificacion(this.motivo);
					viaService.actualizar(viaActualizar);
					Notificacion.show(new Notificacion(
							"Se actualizo correctamente la via",
							Constantes.MENSAJE.TYPE_SUCCES));
				}
				this.txtPaginaActual.setValue("1");
				resetearFormulario();
				getAllVias();
			} else {
				Notificacion.show(new Notificacion(
						"Debe llenar todos los campos",
						Constantes.MENSAJE.TYPE_ERROR));
			}
		} else if (event.getSource() == this.btnCancelar) {
			resetearFormulario();
		} else if (event.getSource() == this.btnBuscarVia) {
			this.txtPaginaActual.setValue("1");
			getAllVias();
		} else if (event.getSource() == this.btnSiguiente) {
			Long paginaActual = Long.parseLong(this.txtPaginaActual.getValue()
					.toString()) + 1;
			if (paginaActual <= Long.parseLong(this.lblTotalPaginas.getValue()
					.toString())) {
				this.txtPaginaActual.setValue(paginaActual.toString());
			}
			getAllVias();
		} else if (event.getSource() == this.btnAtras) {
			Long paginaActual = Long.parseLong(this.txtPaginaActual.getValue()
					.toString()) - 1;
			if (paginaActual >= 1) {
				this.txtPaginaActual.setValue(paginaActual.toString());
			}
			getAllVias();
		} else if (event.getSource() == this.btnInicio) {
			this.txtPaginaActual.setValue("1");
			getAllVias();
		} else if (event.getSource() == this.btnFinal) {
			this.txtPaginaActual.setValue(this.lblTotalPaginas.getValue()
					.toString());
			getAllVias();
		} else if (event.getSource() == this.btnEliminar) {
			if (!confirmacion) {
				Window ventana = SigeUtil.generarBuscador(new Window(),
						"INGRESAR MOTIVO", "360", "260");
				ventana.setContent(new PanelMotivoObservacion(ventana, this,
						Constantes.TIPO_OPERACION.ELIMINACION, (columnLenghts
								.get("motivomodifica"))));
				UI.getCurrent().addWindow(ventana);
				return;
			}
			ConfirmDialog.show(UI.getCurrent(), "Confirmación",
					"Desea Eliminar La vía", "Aceptar", "Cancelar",
					new ConfirmDialog.Listener() {
						@Override
						public void onClose(ConfirmDialog dialog) {
							if (dialog.isConfirmed()) {
								EliminarVia();
							}
						}
					});
		} else if (event.getSource() == this.btnImprimir) {
			Window ventana = SigeUtil.generarBuscador(new Window(), "IMPRIMIR",
					"800px", "550px");
			Map<String, Object> parametros = new HashMap<String, Object>();
			parametros.put("via", this.txtBuscarVia.getValue().toUpperCase());
			parametros.put("tipoVia", this.txtBuscarTipoVia.getValue()
					.toUpperCase());
			ventana.setContent(new PDFVizualizador(this, permiso, parametros,
					null, "ViasImprimir", null));
			UI.getCurrent().addWindow(ventana);
		}
	}

	public void guardarVia(Via via) {
		String tipoVia = this.cbxTipoVia.getItemCaption(this.codtipo);
		String viaNombre = this.txtNombreVia.getValue().toString();
		if (tipoVia.equals("") || via.equals("")) {
			Notification notificacion = new Notification("Mensaje del Sistema",
					"<br/>Debe rellenar todos los campos",
					Notification.TYPE_WARNING_MESSAGE);
			notificacion.setDelayMsec(3000);
			notificacion.setPosition(Notification.POSITION_CENTERED);
			UI.getCurrent().showNotification(notificacion);

		} else {
			viaService.crear(via);
		}
	}

	public void EliminarVia() {
		Via viaEliminar = viaMap.get(idVia);
		viaEliminar.setEstado(false);
		viaEliminar.setMotivoModificacion(this.motivo);
		viaService.actualizar(viaEliminar);
		resetearFormulario();
		getAllVias();
	}

	private void desactivarCampos(boolean estado) {
		txtNombreVia.setEnabled(estado);
		txtCodigoTipoVia.setEnabled(estado);
		cbxTipoVia.setEnabled(estado);
	}

	public void respuesta(Long idVia) {
		if (quienLlama instanceof PersonaMantenimiento) {
			PersonaMantenimiento panel = (PersonaMantenimiento) quienLlama;
			panel.getViaSeleccionada(idVia);
			UI.getCurrent().removeWindow(windowContiene);
		} else {
			return;
		}
	}

	public void resetearFormulario() {
		this.esNuevo = false;
		this.btnEliminar.setEnabled(false);
		this.btnCancelar.setEnabled(false);
		this.btnNuevo.setEnabled(true);
		this.btnGuardar.setEnabled(false);
		// this.txtCodigoTipoVia.setValue("");
		this.cbxTipoVia.setCaption("");
		this.txtNombreVia.setValue("");
		desactivarCampos(false);
		LimpiarMapas();
	}

	public void NuevoRegistro() {
		this.esNuevo = true;
		via = new Via();
		tipoVia = new TipoVia();
		this.btnGuardar.setCaption("Guardar");
		this.btnGuardar.setVisible(permiso.getNuevo());
		this.btnGuardar.setEnabled(true);
		this.btnCancelar.setVisible(permiso.getNuevo());
		this.btnCancelar.setEnabled(true);
		this.btnNuevo.setEnabled(false);
		desactivarCampos(permiso.getNuevo());
		LimpiarMapas();

	}

	public void LimpiarMapas() {
		viaMap.clear();
		tipoViaMap.clear();
	}

	@AutoGenerated
	private AbsoluteLayout buildMainLayout() {
		// common part: create layout
		mainLayout = new AbsoluteLayout();
		mainLayout.setImmediate(false);
		mainLayout.setWidth("100%");
		mainLayout.setHeight("100%");

		// top-level component properties
		setWidth("100.0%");
		setHeight("100.0%");

		// tbVias
		tbVias = new Table();
		tbVias.setImmediate(false);
		tbVias.setWidth("330px");
		tbVias.setHeight("230px");
		mainLayout.addComponent(tbVias, "top:40.0px;left:20.0px;");

		// txtBuscarVia
		txtBuscarVia = new TextField();
		txtBuscarVia.setImmediate(false);
		txtBuscarVia.setWidth("152px");
		txtBuscarVia.setHeight("24px");
		mainLayout.addComponent(txtBuscarVia, "top:16.0px;left:160.0px;");

		// btnBuscarVia
		btnBuscarVia = new Boton();
		btnBuscarVia.setIcon(new ThemeResource("images/botones/find.png"));
		btnBuscarVia.setImmediate(false);
		btnBuscarVia.setDescription("Buscar v&iacute;a");
		btnBuscarVia.setWidth("28px");
		btnBuscarVia.setHeight("24px");
		mainLayout.addComponent(btnBuscarVia, "top:16.0px;left:312.0px;");

		// label_1
		label_1 = new Label();
		label_1.setImmediate(false);
		label_1.setWidth("-1px");
		label_1.setHeight("-1px");
		label_1.setValue("<b>Mantenimiento de v&iacute;as</b>");
		mainLayout.addComponent(label_1, "top:20.0px;left:440.0px;");

		// label_2
		label_2 = new Label();
		label_2.setImmediate(false);
		label_2.setWidth("-1px");
		label_2.setHeight("-1px");
		label_2.setValue("Tipo de V&iacute;a: ");
		mainLayout.addComponent(label_2, "top:60.0px;left:360.0px;");

		// txtCodigoTipoVia
		txtCodigoTipoVia = new NumberField();
		txtCodigoTipoVia.setImmediate(false);
		txtCodigoTipoVia.setWidth("30px");
		txtCodigoTipoVia.setHeight("-1px");
		mainLayout.addComponent(txtCodigoTipoVia, "top:56.0px;left:429.0px;");

		// lblNombre
		lblNombre = new Label();
		lblNombre.setImmediate(false);
		lblNombre.setWidth("-1px");
		lblNombre.setHeight("-1px");
		lblNombre.setValue("Nombre:");
		mainLayout.addComponent(lblNombre, "top:102.0px;left:360.0px;");

		// txtNombreVia
		txtNombreVia = new TextField();
		txtNombreVia.setImmediate(false);
		txtNombreVia.setWidth("240px");
		txtNombreVia.setHeight("-1px");
		mainLayout.addComponent(txtNombreVia, "top:96.0px;left:429.0px;");

		// btnNuevo
		btnNuevo = new Button();
		btnNuevo.setCaption("Nuevo");
		btnNuevo.setIcon(new ThemeResource("images/botones/new.png"));
		btnNuevo.setImmediate(true);
		btnNuevo.setDescription("Nuevo Registro");
		btnNuevo.setWidth("110px");
		btnNuevo.setHeight("-1px");
		mainLayout.addComponent(btnNuevo, "top:134.0px;left:395.0px;");

		// btnGuardar
		btnGuardar = new Button();
		btnGuardar.setCaption("Guardar");
		btnGuardar.setIcon(new ThemeResource("images/botones/save.png"));
		btnGuardar.setImmediate(true);
		btnGuardar.setDescription("Guardar Registro");
		btnGuardar.setWidth("110px");
		btnGuardar.setHeight("-1px");
		mainLayout.addComponent(btnGuardar, "top:134.0px;left:520.0px;");

		// btnEliminar
		btnEliminar = new Button();
		btnEliminar.setCaption("Eliminar");
		btnEliminar.setIcon(new ThemeResource("images/botones/delete.png"));
		btnEliminar.setImmediate(true);
		btnEliminar.setDescription("Eliminar Registro");
		btnEliminar.setWidth("110px");
		btnEliminar.setHeight("-1px");
		mainLayout.addComponent(btnEliminar, "top:168.0px;left:395.0px;");

		// btnCancelar
		btnCancelar = new Button();
		btnCancelar.setCaption("Cancelar");
		btnCancelar.setIcon(new ThemeResource("images//botones/undo.png"));
		btnCancelar.setImmediate(true);
		btnCancelar.setDescription("Cancelar Cambios");
		btnCancelar.setWidth("110px");
		btnCancelar.setHeight("-1px");
		mainLayout.addComponent(btnCancelar, "top:168.0px;left:520.0px;");

		// btnInicio
		btnInicio = new Boton();
		btnInicio.setIcon(new ThemeResource("images/botones/start.png"));
		btnInicio.setImmediate(false);
		btnInicio.setDescription("Ir al inicio");
		btnInicio.setWidth("30px");
		btnInicio.setHeight("28px");
		mainLayout.addComponent(btnInicio, "top:279.0px;left:51.0px;");

		// btnAtras
		btnAtras = new Boton();
		btnAtras.setIcon(new ThemeResource("images/botones/previous.png"));
		btnAtras.setImmediate(false);
		btnAtras.setDescription("P&aacute;gina anterior");
		btnAtras.setWidth("30px");
		btnAtras.setHeight("-1px");
		mainLayout.addComponent(btnAtras, "top:279.0px;left:80.0px;");

		// label_3
		label_3 = new Label();
		label_3.setImmediate(false);
		label_3.setWidth("-1px");
		label_3.setHeight("-1px");
		label_3.setValue("P&aacute;gina");
		mainLayout.addComponent(label_3, "top:284.0px;left:120.0px;");

		// txtPaginaActual
		txtPaginaActual = new NumberField();
		txtPaginaActual.setImmediate(false);
		txtPaginaActual.setWidth("27px");
		txtPaginaActual.setHeight("25px");
		mainLayout.addComponent(txtPaginaActual, "top:279.0px;left:160.0px;");

		// label_4
		label_4 = new Label();
		label_4.setImmediate(false);
		label_4.setWidth("3px");
		label_4.setHeight("18px");
		label_4.setValue("/");
		mainLayout.addComponent(label_4, "top:284.0px;left:193.0px;");

		// lblTotalPaginas
		lblTotalPaginas = new Label();
		lblTotalPaginas.setImmediate(false);
		lblTotalPaginas.setWidth("37px");
		lblTotalPaginas.setHeight("-1px");
		lblTotalPaginas.setValue("0");
		mainLayout.addComponent(lblTotalPaginas, "top:285.0px;left:203.0px;");

		// btnSiguiente
		btnSiguiente = new Boton();
		btnSiguiente.setIcon(new ThemeResource("images/botones/next.png"));
		btnSiguiente.setImmediate(false);
		btnSiguiente.setDescription("Siguiente P&aacute;gina");
		btnSiguiente.setWidth("30px");
		btnSiguiente.setHeight("-1px");
		mainLayout.addComponent(btnSiguiente, "top:279.0px;left:246.0px;");

		// btnFinal
		btnFinal = new Boton();
		btnFinal.setIcon(new ThemeResource("images/botones/final.png"));
		btnFinal.setImmediate(false);
		btnFinal.setDescription("Ir al Final");
		btnFinal.setWidth("30px");
		btnFinal.setHeight("-1px");
		mainLayout.addComponent(btnFinal, "top:279.0px;left:275.0px;");

		// cbxTipoVia
		cbxTipoVia = new ComboBox();
		cbxTipoVia.setImmediate(false);
		cbxTipoVia.setWidth("207px");
		cbxTipoVia.setHeight("-1px");
		mainLayout.addComponent(cbxTipoVia, "top:56.0px;left:462.0px;");

		// btnImprimir
		btnImprimir = new Button();
		btnImprimir.setCaption("Imprimir");
		btnImprimir.setIcon(new ThemeResource("images/botones/print.png"));
		btnImprimir.setImmediate(true);
		btnImprimir.setWidth("110px");
		btnImprimir.setHeight("-1px");
		mainLayout.addComponent(btnImprimir, "top:201.0px;left:395.0px;");

		// txtBuscarTipoVia
		txtBuscarTipoVia = new TextField();
		txtBuscarTipoVia.setImmediate(false);
		txtBuscarTipoVia.setWidth("102px");
		txtBuscarTipoVia.setHeight("-1px");
		mainLayout.addComponent(txtBuscarTipoVia, "top:16.0px;left:60.0px;");

		return mainLayout;
	}

}
